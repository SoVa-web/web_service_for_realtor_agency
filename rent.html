<!DOCTYPE html>
<html>
<head>
    <title>Закриття оголошення</title>
    <meta charset="utf-8" />
    <script href="https://cdn.jsdelivr.net/npm/cross-fetch@3.1.5/dist/browser-ponyfill.min.js"></script>
</head>
<body>
    <div class = "agr">    
        <h1>Закриття оголошення</h1>
        <div>
             <form >
                <label>Ідентифікатор нерухомості</label><br>
                <input id="id" type="number" name="id" /><br><br>
                <label>Cтатус угоди</label><br>
                <input id="st" type="text" name="st" /><br><br>

            </form>
                <button onclick="add_agr()">Внести дані про угоду</button> 

        </div>
    </div>
    <script>

    const add_agr = async ()=>{
        let id = document.getElementById('id').value
        let st = document.getElementById('st').value

        if (id != '' && st != ''){
            const response = await fetch(`http://localhost:3000/add_agr?id=${id}&st=${st}`, {
            mode: 'cors',
            method: 'POST',
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin':'*'
            }
            }).then(data => {
                if (data.status == 200){
                    window.location = 'http://127.0.0.1:3000/index.html'
                }else{
                    console.log("Something is wrong")
                }
                
            })
        }
            
}
    </script>
</body>
</html>